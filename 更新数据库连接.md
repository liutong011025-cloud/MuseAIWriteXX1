# æ›´æ–°æ•°æ®åº“è¿æ¥åˆ° Vercel Postgres

## ğŸ” é—®é¢˜åŸå› 

ä½ çš„ `.env` æ–‡ä»¶ä¸­çš„ `DATABASE_URL` ä»ç„¶æŒ‡å‘ Docker å®¹å™¨çš„æ•°æ®åº“ï¼š
```
DATABASE_URL=postgresql://postgres:museaiwrite123@museaiwrite-db:5432/museaiwrite?schema=public
```

è¿™ä¸ªåœ°å€ `museaiwrite-db:5432` åªèƒ½åœ¨ Docker å®¹å™¨å†…éƒ¨è®¿é—®ï¼Œæœ¬åœ°æ— æ³•è¿æ¥ã€‚

## âœ… è§£å†³æ–¹æ¡ˆ

### æ­¥éª¤ 1: è·å– Vercel Postgres è¿æ¥å­—ç¬¦ä¸²

1. åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­ï¼Œè¿›å…¥ **Storage** â†’ ä½ çš„æ•°æ®åº“
2. æ‰¾åˆ° **Connection String** æˆ– **.env** éƒ¨åˆ†
3. å¤åˆ¶ `DATABASE_URL` çš„å€¼
4. æ ¼å¼ç±»ä¼¼ï¼š
   ```
   postgresql://default:xxxxx@xxxxx.aws.neon.tech:5432/verceldb?sslmode=require
   ```

### æ­¥éª¤ 2: æ›´æ–° .env æ–‡ä»¶

æœ‰ä¸¤ç§æ–¹å¼ï¼š

#### æ–¹å¼ A: æ›´æ–° .env æ–‡ä»¶ï¼ˆç”¨äºæœ¬åœ°å¼€å‘ï¼‰

1. æ‰“å¼€ `.env` æ–‡ä»¶
2. æ›´æ–° `DATABASE_URL` ä¸º Vercel Postgres çš„è¿æ¥å­—ç¬¦ä¸²ï¼š
   ```
   DATABASE_URL=postgresql://default:xxxxx@xxxxx.aws.neon.tech:5432/verceldb?sslmode=require
   ```
3. ä¿å­˜æ–‡ä»¶

#### æ–¹å¼ B: åˆ›å»º .env.local æ–‡ä»¶ï¼ˆæ¨èï¼Œä¸å½±å“ Dockerï¼‰

1. åˆ›å»º `.env.local` æ–‡ä»¶ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
2. æ·»åŠ ï¼š
   ```
   DATABASE_URL=postgresql://default:xxxxx@xxxxx.aws.neon.tech:5432/verceldb?sslmode=require
   ```
3. `.env.local` ä¼šè¦†ç›– `.env` ä¸­çš„å€¼ï¼Œä¸”ä¸ä¼šè¢« Git æäº¤

### æ­¥éª¤ 3: é‡æ–°è¿è¡Œæ•°æ®åº“è¿ç§»

æ›´æ–°è¿æ¥å­—ç¬¦ä¸²åï¼Œé‡æ–°è¿è¡Œï¼š

```bash
npx prisma db push
```

## ğŸ“‹ æ³¨æ„äº‹é¡¹

### æœ¬åœ°å¼€å‘ vs Docker å¼€å‘

- **å¦‚æœä½¿ç”¨ Docker æœ¬åœ°å¼€å‘**ï¼šä¿æŒ `.env` ä¸­çš„ Docker æ•°æ®åº“åœ°å€
- **å¦‚æœè¦è¿æ¥ Vercel Postgres**ï¼šä½¿ç”¨ `.env.local` è¦†ç›–ï¼Œæˆ–æ›´æ–° `.env`

### ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§

Next.js çš„ç¯å¢ƒå˜é‡åŠ è½½é¡ºåºï¼š
1. `.env.local`ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼Œæœ¬åœ°è¦†ç›–ï¼‰
2. `.env.development` æˆ– `.env.production`
3. `.env`

### æ¨èé…ç½®

**`.env`**ï¼ˆä¿ç•™ Docker é…ç½®ï¼Œç”¨äº Docker å¼€å‘ï¼‰ï¼š
```
DATABASE_URL=postgresql://postgres:museaiwrite123@museaiwrite-db:5432/museaiwrite?schema=public
```

**`.env.local`**ï¼ˆç”¨äºè¿æ¥ Vercel Postgresï¼Œä¸æäº¤åˆ° Gitï¼‰ï¼š
```
DATABASE_URL=postgresql://default:xxxxx@xxxxx.aws.neon.tech:5432/verceldb?sslmode=require
```

## âœ… éªŒè¯

è¿è¡Œ `npx prisma db push` åï¼Œåº”è¯¥çœ‹åˆ°ï¼š

```
âœ” Database synchronized successfully
```

è€Œä¸æ˜¯è¿æ¥é”™è¯¯ã€‚

